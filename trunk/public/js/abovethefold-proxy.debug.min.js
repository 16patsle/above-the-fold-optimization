!function(a,b){var c,d=!1,e=!1,f=!1,g=!1,h=!1,i=!1;a.Abtf.proxy_setup=function(a){c=a.url||ajaxurl,c||console.error("Abtf.proxy()","no proxy url",a),d=a.js||!1,e=a.css||!1,f=a.js_include||!1,g=a.js_exclude||!1,h=a.css_include||!1,i=a.css_exclude||!1};var j={Element:"undefined"!=typeof Element&&Element,Document:"undefined"!=typeof Document&&Document},k={append:{},insert:{}};for(var l in j)j.hasOwnProperty(l)&&j[l]&&(k.append[l]=j[l].prototype.appendChild,k.insert[l]=j[l].prototype.insertBefore);var m=document.createElement("a");m.href=document.location.href;var n=function(a){var b=document.createElement("a");return b.href=a,b},o=function(a){if(a.nodeName)if("SCRIPT"===a.nodeName.toUpperCase()){if(!d)return!1;if(a.src){var b=n(a.src);if(b.host===m.host)return!1;if(f){for(var c=!1,j=f.length,k=0;k<j;k++)if(b.href.indexOf(f[k])!==-1){c=!0;break}if(!c)return!1}if(g)for(var j=g.length,k=0;k<j;k++)if(b.href.indexOf(g[k])!==-1)return!1;return"js"}}else if("LINK"===a.nodeName.toUpperCase()&&"stylesheet"===a.rel.toLowerCase()){if(!e)return!1;if(a.href){var b=n(a.href);if(b.host===m.host)return!1;if(h){for(var c=!1,j=h.length,k=0;k<j;k++)if(b.href.indexOf(h[k])!==-1){c=!0;break}if(!c)return!1}if(i)for(var j=i.length,k=0;k<j;k++)if(b.href.indexOf(i[k])!==-1)return!1;return"css"}}return!1},p=function(a){var b=o(a);if(!b)return!1;console.log("Abtf.proxy()","capture","css"===b?a.href:a.src);var d=n("css"===b?a.href:a.src).href;"css"===b?a.href=c.replace("{PROXY:URL}",escape(d)).replace("{PROXY:TYPE}",escape(b)):"js"===b&&(a.src=c.replace("{PROXY:URL}",escape(d)).replace("{PROXY:TYPE}",escape(b)))},q={appendChild:function(a,b){return p(b),k.append[a].call(this,b)},insertBefore:function(a,b,c){return p(b),k.insert[a].call(this,b,c)}};for(var l in j)j.hasOwnProperty(l)&&j[l]&&!function(a){j[a].prototype.appendChild=function(b){return q.appendChild.call(this,a,b)},j[a].prototype.insertBefore=function(b,c){return q.insertBefore.call(this,a,b,c)}}(l)}(window,window.Abtf);