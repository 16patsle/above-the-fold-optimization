!function(e,t){"$:nomunge";var a,i=e.jQuery||e.Cowboy||(e.Cowboy={});i.throttle=a=function(e,a,n,r){var o,s=0;function c(){var i=this,c=+new Date-s,u=arguments;function l(){s=+new Date,n.apply(i,u)}r&&!o&&l(),o&&clearTimeout(o),r===t&&c>e?l():!0!==a&&(o=setTimeout(r?function(){o=t}:l,r===t?e-c:e))}return"boolean"!=typeof a&&(r=n,n=a,a=t),i.guid&&(c.guid=n.guid=n.guid||i.guid++),c},i.debounce=function(e,i,n){return n===t?a(e,i,!1):a(e,n,!1!==i)}}(this),window.requestAnimationFrame||(window.requestAnimationFrame=window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(e,t){window.setTimeout(e,1e3/60)}),window.requestIdleCallback||(window.requestIdleCallback=function(e){setTimeout(e)}),jQuery(function(e){jQuery("select.wp-pageselect").length>0&&void 0!==jQuery("select.wp-pageselect").selectize&&jQuery("select.wp-pageselect").selectize({placeholder:"Search a post/page/category ID or name...",optgroupField:"class",labelField:"name",searchField:["name"],optgroups:window.abtf_pagesearch_optgroups,load:function(e,t){if(!e.length)return t();jQuery.ajax({url:ajaxurl,type:"POST",dataType:"json",data:{action:"abtf_page_search",query:e,maxresults:10},error:function(){t()},success:function(e){t(e)}})}}),jQuery("#fullcsspages").length>0&&void 0!==jQuery("#fullcsspages").selectize&&(jQuery("#fullcsspages_dl").on("click",function(){var e=jQuery("#fullcsspages").val();""!==e?(/\?/.test(e)?e+="&":e+="?",document.location.href=e+"extract-css="+jQuery("#fullcsspages_dl").attr("rel")+"&output=download"):alert("Select a page...")}),jQuery("#fullcsspages_print").on("click",function(){var e=jQuery("#fullcsspages").val();""!==e?(/\?/.test(e)?e+="&":e+="?",window.open(e+"extract-css="+jQuery("#fullcsspages_print").attr("rel")+"&output=print")):alert("Select a page...")})),jQuery("#comparepages").length>0&&void 0!==jQuery("#comparepages").selectize&&(jQuery("#comparepages_split").on("click",function(){var e=jQuery("#comparepages").val();""!==e?(/\?/.test(e)?e+="&":e+="?",window.open(e+"compare-abtf="+jQuery("#comparepages_split").attr("rel"))):alert("Select a page...")}),jQuery("#comparepages_full").on("click",function(){var e=jQuery("#comparepages").val();""!==e?(/\?/.test(e)?e+="&":e+="?",window.open(e+"abtf-critical-only="+jQuery("#comparepages_full").attr("rel"))):alert("Select a page...")})),e(".clickselect").on("click",function(){if(document.selection)(t=document.body.createTextRange()).moveToElementText(e(this)[0]),t.select();else if(window.getSelection){var t;(t=document.createRange()).selectNode(e(this)[0]),window.getSelection().addRange(t)}}),e("[data-example]").each(function(t,a){e(a).on("click",function(t){var a=e("#"+e(this).data("example"));if(a.length>0){var i=a.data("example-text"),n=a.html(),r=e(this).data("example-html");"string"!=typeof r&&(r=JSON.stringify(r)),a.html(r),a.data("example-text",e(this).html()),e(this).html(i),e(this).data("example-html",n)}})}),jQuery(".github-button").length>0&&window.requestIdleCallback(function(){var e=document.createElement("script");e.type="text/javascript",e.async=!0,e.src="https://buttons.github.io/buttons.js",document.getElementsByTagName("head")[0].appendChild(e)}),e(".wp-submenu a[href]").each(function(t,a){"admin.php?page=pagespeed-instant"===e(a).attr("href")&&(e(a).attr("href","https://test.fastestwebsite.co/"),e(a).attr("target","_blank"))})}),jQuery(function(){0!==jQuery(".abtf-bt-builder").length&&(jQuery('.abtf-bt-builder input[name="taskname"]').on("keyup change",function(){var e=jQuery(this).val();if(""===e&&(e="task-name"),/^critical-/.test(e)||(e="critical-",jQuery(this).val(e)),!/^[a-z0-9\-]+$/.test(e)){var t=new RegExp("[^a-z0-9-]+","g");e=e.replace(t,""),jQuery(this).val(e)}e.length>50&&(e=e.substring(0,50),jQuery(this).val(e),alert("Maximum name length is 50")),jQuery(".gulp-task-name").html(e)}),jQuery('.abtf-bt-builder input[name="taskname"]').on("blur",function(){var e=jQuery(this).val();if("critical-"===e)return e="",jQuery(this).val(e),void jQuery(".gulp-task-name").html("task-name");var t=e.replace(/^-+/g,"").replace(/-+$/g,"");e!==t&&(jQuery(this).val(t),jQuery(".gulp-task-name").html(t))}),jQuery('.abtf-bt-builder input[name="taskname"]').on("focus",function(){""===jQuery(this).val()&&jQuery(this).val("critical-")}),jQuery('.abtf-bt-builder input[name="taskname"]').on("click",function(){jQuery(this).blur().focus().val(jQuery(this).val())}))}),jQuery(function(){jQuery("#addcriticalcss-form").length>0&&(jQuery("#addcriticalcss").on("click",function(){if(!jQuery("#addcriticalcss-form").is(":visible")){var e=jQuery("#addcc_conditions");e.data("conditions-loaded")||(e.data("conditions-loaded",1),window.loadConditionSelect(jQuery("#addcc_conditions")))}jQuery("#addcriticalcss-form").toggle()}),jQuery("#addcc_save").on("click",function(){var e=jQuery.trim(jQuery("#addcc_name").val()),t=jQuery("#addcc_conditions").val();if(""===e)return alert("Enter a name (admin reference)..."),void jQuery("#addcc_name").focus();if(!/^[a-zA-Z0-9\-\_ ]+$/.test(e))return alert("The name contains invalid characters."),void jQuery("#addcc_name").focus();var a,i=jQuery("<form />");i.attr("method","post"),i.attr("action",jQuery("#abtf_settings_form").data("addccss")),(a=jQuery('<input type="hidden" name="name" />')).val(e),i.append(a),(a=jQuery('<input type="hidden" name="conditions" />')).val(t),i.append(a),(a=jQuery('<input type="hidden" name="_wpnonce" />')).val(jQuery("#_wpnonce").val()),i.append(a),jQuery("body").append(i),jQuery(i).submit()}))}),jQuery(function(){var e=jQuery("#abtfcss").length>0&&1===parseInt(jQuery("#abtfcss").data("advanced")),t={};if(e){var a=function(e){0!==jQuery("#ccss_editor_"+e+" .abtfcss").length&&(t[e]=CodeMirror.fromTextArea(jQuery("#ccss_editor_"+e+" .abtfcss")[0],{lineWrapping:!0,lineNumbers:!0,gutters:["CodeMirror-lint-markers"],lint:!0}),t[e].on("change",function(){window.inputChange=!0}),jQuery("#ccss_editor_"+e).closest(".menu-item").removeClass("menu-item-edit-inactive").addClass("menu-item-edit-active"),n())},i=function(e){t[e]&&(t[e].save(),t[e].toTextArea(),t[e]=!1,jQuery("#ccss_editor_"+e).closest(".menu-item").addClass("menu-item-edit-inactive").removeClass("menu-item-edit-active"))},n=function(){var e=jQuery(".CodeMirror").closest(".inside").outerWidth()-26;jQuery(".CodeMirror").css({width:e+"px"})};jQuery(window).resize(function(){n();for(editor_id in t)t.hasOwnProperty(editor_id)||t[editor_id]&&t[editor_id].refresh()})}if(window.loadConditionSelect=function(e){if(0!==jQuery(e).length){jQuery(e).val("");var t,a,i=jQuery(e).selectize({options:[],searchField:["title","titlelong","value"],persist:!0,optgroupField:"optgroup",placeholder:"Select one or more conditions. Type the name of a page or post to search (autocomplete)...",delimiter:"|==abtf==|",render:{optgroup_header:function(e,t){return'<div class="optgroup-header "><span class="'+e.class+'">&nbsp;</span>'+t(e.title)+"</div>"},option:function(e,t){return'<div class="opt"><span class="title"><span class="name">'+t(e.titlelong?e.titlelong:e.title)+'</span><span class="desc">&nbsp;&nbsp;'+t(e.value)+"</span></span></div>"},item:function(e,t){return'<div class="'+e.class+'" title="'+t(e.value)+(e.titlelong?" - "+t(e.titlelong):"")+'"><span class="name">'+t(e.title)+"</span></div>"}},createFilter:function(e){return!!new RegExp("^filter:([a-z0-9-_]+(:.*)?)?$","i").test(e)&&e},create:function(e){return!!new RegExp("^filter:[a-z0-9-_]+(:.*)?$","i").test(e)&&{value:e,title:e,optgroup:"filter",class:"filter"}},load:function(e,t){if(!e.length)return t();jQuery.ajax({url:ajaxurl,type:"POST",dataType:"json",data:{action:"abtf_condition_search",query:e,maxresults:10},error:function(){t()},success:function(e){t(e)}})},plugins:["remove_button"]});for(a in window.conditional_options[1])window.conditional_options[1].hasOwnProperty(a)&&i[0].selectize.addOptionGroup(a,window.conditional_options[1][a]);for(var n=0;n<window.conditional_options[0].length;n++)t=window.conditional_options[0][n],i[0].selectize.addOption(t);var r=jQuery(e).data("conditions");if(r)for(n=0;n<r.length;n++)void 0===i[0].selectize.options[r[n].value]&&i[0].selectize.addOption(r[n]),i[0].selectize.addItem(r[n].value,!0)}},window.unloadConditionSelect=function(e){if(0!==jQuery(e).length){var t=jQuery(e)[0].selectize,a=t.getValue().split(t.settings.delimiter),i=[];if(a instanceof Array)for(var n=["value","title","optgroup","class"],r=n.length,o=a.length,s=0;s<o;s++)if(t.options[a[s]]){for(var c=t.options[a[s]],u={},l=0;l<r;l++)void 0!==c[n[l]]&&(u[n[l]]=c[n[l]]);i.push(u)}jQuery(e).data("conditions",i),t.destroy()}},jQuery(".criticalcss-edit-header").length>0){var r={},o=function(e,t){var a=jQuery(e).attr("rel"),i=parseInt(jQuery("#ccss_editor_"+a).data("toggle-start"));return 1===i?1===t&&(r[a]&&clearTimeout(r[a]),jQuery("#ccss_editor_"+a).data("toggle-start",""),jQuery(e).on("click",s),jQuery(".loading-editor",e).hide()):0===t&&(jQuery("#ccss_editor_"+a).is(":visible")||jQuery(".loading-editor",e).show(),jQuery("#ccss_editor_"+a).data("toggle-start",1),jQuery(e).off("click",s),r[a]=setTimeout(function(){o(e,1)},3e3)),i},s=function(t){var n=jQuery(this),r=jQuery(this).attr("rel");if(!(t.originalEvent.detail>1)){if(t.preventDefault(),t.stopPropagation(),1===o(n,0))return!1;setTimeout(function(){window.requestAnimationFrame(function(){jQuery("#ccss_editor_"+r).is(":visible")?(e&&i(r),unloadConditionSelect(jQuery('.conditions input[rel="conditions"]',jQuery("#ccss_editor_"+r))),jQuery("#ccss_editor_"+r).hide()):(jQuery("#ccss_editor_"+r).show(),e&&a(r),loadConditionSelect(jQuery('.conditions input[rel="conditions"]',jQuery("#ccss_editor_"+r)))),o(n,1)})},10)}};jQuery(".criticalcss-edit-header").on("click",s),jQuery(".criticalcss-edit-header").each(function(e,t){if(jQuery(".item-delete",jQuery(t)).length>0){var a=jQuery(t).data("file");jQuery(".item-delete",jQuery(t)).on("click",function(e){if(e.preventDefault(),e.stopPropagation(),confirm(jQuery(this).data("confirm"),!0)){var t,i=jQuery("<form />");i.attr("method","post"),i.attr("action",jQuery("#abtf_settings_form").data("delccss")),(t=jQuery('<input type="hidden" name="file" />')).val(a),i.append(t),(t=jQuery('<input type="hidden" name="_wpnonce" />')).val(jQuery("#_wpnonce").val()),i.append(t),jQuery("body").append(i),jQuery(i).submit()}})}})}jQuery("#abtfcss").length>0&&1===parseInt(jQuery("#abtfcss").data("advanced"))&&jQuery(".ccss_editor").each(function(t,i){jQuery(i).is(":visible")&&e&&a(jQuery(".criticalcss-edit-header",jQuery(i).parents(".menu-item").first()).attr("rel"))})});