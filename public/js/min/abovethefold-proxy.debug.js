Abtf[0](function(e,g){var n,b,f=!1,i=!1,v=!1,l=!1,c=!1,a=!1,s=!1,x=!1,y=[],A=[],m=[],O={},u=[];g[27]=function(e){if(void 0===r)var r=!1;if((n=e[0]&&-1!==e[0]?e[0]:r)||console.error("Abtf.proxy()","no proxy url",e),f=!(!e[1]||-1===e[1])&&e[1],i=!(!e[2]||-1===e[2])&&e[2],(v=!(!e[9]||-1===e[9])&&e[9])&&u.push(v),l=!(!e[5]||-1===e[5])&&e[5],c=!(!e[6]||-1===e[6])&&e[6],a=!(!e[7]||-1===e[7])&&e[7],s=!(!e[8]||-1===e[8])&&e[8],e[3]){x=!0;for(var o=0;o<e[3].length;o++)"regex"===e[3][o][0]?m.push([e[3][o][2],e[3][o][3],e[3][o][1]]):(y.push(e[3][o][0]),A.push(e[3][o][1])),e[3][o][4]&&(O[e[3][o][0]]=e[3][o][4],-1===u.indexOf(e[3][o][4])&&u.push(e[3][o][4]));b=!(!e[4]||-1===e[4])&&e[4]}if(0===u.length)u=!1;else{var t=u.length;for(o=0;o<t;o++)u[o]=j(u[o])}};var r={Element:"undefined"!=typeof Element&&Element,Document:"undefined"!=typeof Document&&Document},t={append:{},insert:{}};for(var o in r)r.hasOwnProperty(o)&&r[o]&&(t.append[o]=r[o].prototype.appendChild,t.insert[o]=r[o].prototype.insertBefore);var p=document.createElement("a");p.href=document.location.href;var j=function(e){var r=document.createElement("a");return r.href=e,r},P=function(e,r){return"css"===r?n.replace("{PROXY:URL}",escape(e)).replace("{PROXY:TYPE}",escape(r)):"js"===r?n.replace("{PROXY:URL}",escape(e)).replace("{PROXY:TYPE}",escape(r)):void 0},h=function(e,r){var o="object"==typeof e&&void 0!==e.href?e:j(e);if("blob:"===o.protocol)return!1;if(u&&!0!==r)for(var t=u.length,n=0;n<t;n++)if(-1!==o.href.indexOf(u[n].href))return!1;return o.host!==p.host},d=function(e){if(e.nodeName)if("SCRIPT"===e.nodeName.toUpperCase()){if(!f)return!1;if(e.hasAttribute("data-abtf"))return!1;if(e.src){if(function(e){var r="object"==typeof e&&void 0!==e.href?e:j(e);if("blob:"===r.protocol)return!0;if(l){for(var o=!1,t=l.length,n=0;n<t;n++)if(-1!==r.href.indexOf(l[n])){o=!0;break}if(!o)return console.log("Abtf.proxy()","ignore",g[29](r.href),"not on include list"),!0}if(c)for(t=c.length,n=0;n<t;n++)if(-1!==r.href.indexOf(c[n]))return console.log("Abtf.proxy()","ignore",g[29](r.href),"on exclude list:",c[n]),!0;return!1}(r=j(e.src)))return!1;if(!h(r)){if(void 0!==g[24]){if("blob:"===r.protocol)return!1;url=g[24](r.href),url!==r.href?(console.log("Abtf.proxy()","localStorage local capture",g[29](r.href),"➤",url),e.src=url):console.log("Abtf.proxy()","localStorage local capture",g[29](r.href),"➤","bypass cache","➤",url)}return!1}return"js"}}else if("LINK"===e.nodeName.toUpperCase()&&"stylesheet"===e.rel.toLowerCase()){if(!i)return!1;if(e.hasAttribute("data-abtf"))return!1;var r;if(e.href)return!function(e){var r="object"==typeof e&&void 0!==e.href?e:j(e);if("blob:"===r.protocol)return!0;if(a){for(var o=!1,t=a.length,n=0;n<t;n++)if(-1!==r.href.indexOf(a[n])){o=!0;break}if(!o)return console.log("Abtf.proxy()","ignore",g[29](r.href),"not on include list"),!0}if(s)for(t=s.length,n=0;n<t;n++)if(-1!==r.href.indexOf(s[n]))return console.log("Abtf.proxy()","ignore",g[29](r.href),"on exclude list:",s[n]),!0;return!1}(r=j(e.href))&&(!!function(e){var r="object"==typeof e&&void 0!==e.href?e:j(e);if("blob:"===r.protocol)return!1;if(u)for(var o=u.length,t=0;t<o;t++)if(-1!==r.href.indexOf(u[t].href))return!1;return r.host!==p.host}(r)&&"css")}return!1},C=function(e){var r=d(e);if(!r)return!1;var o=function(e,r){var o,t=!1;if(x){var n=y.indexOf(e);if(-1<n)var f=A[n];else if(0<m.length)for(var i,l,c=m.length,a=0;a<c;a++){l=!1;try{i=new RegExp(m[a][0],m[a][1]||"")}catch(e){l=!0}if(!l&&i.test(e)){t=!0,o=e,m[a][2]?f=m[a][2]:m[a][3]&&(e=m[a][3]);break}}if(f){var s,u=b;void 0!==O[e]?s=O[e]:v&&(s=v),s&&(u=u.replace(/^http(s)?:\/\/[^\/]+\//,s)),u+=f.substr(0,2)+"/",u+=f.substr(2,2)+"/",u+=f.substr(4,2)+"/",u+=f;var p=!1;if("js"===r){if(u+=".js",void 0!==g[24]){var h=j(u).href;(u=g[24](h))!==h&&(p=u)}}else"css"===r&&(u+=".css");return p?t?console.log("Abtf.proxy()","localStorage regex capture",g[29](o),"➤","cache:"+f,"➤",p):console.log("Abtf.proxy()","localStorage capture",g[29](e),"➤","cache:"+f,"➤",p):t?console.log("Abtf.proxy()","regex capture",g[29](o),"➤","cache:"+f):console.log("Abtf.proxy()","capture",g[29](e),"➤","cache:"+f),u}}if("js"===r&&void 0!==g[24]){var d=j(e).href;if((e=g[24](d))!==d)return t?console.log("Abtf.proxy()","localStorage regex capture",g[29](o),"regex","➤",g[29](d),"➤",e):console.log("Abtf.proxy()","localStorage capture",g[29](d),"➤",e),e}return t?console.log("Abtf.proxy()","capture",g[29](o),"regex","➤",e):console.log("Abtf.proxy()","capture",g[29](e)),P(e,r)}(j("css"===r?e.href:e.src).href,r);"css"===r?e.href=o:"js"===r&&(e.src=o)},E={appendChild:function(e,r){return C(r),t.append[e].call(this,r)},insertBefore:function(e,r,o){return C(r),t.insert[e].call(this,r,o)}};for(var o in r)r.hasOwnProperty(o)&&r[o]&&function(o){r[o].prototype.appendChild=function(e){return E.appendChild.call(this,o,e)},r[o].prototype.insertBefore=function(e,r){return E.insertBefore.call(this,o,e,r)}}(o);g[28]=function(e){return h(e,!0)?P(e,"js"):e}});