Abtf[0](function(n,l){if(n.localStorage&&n.Worker){var f=[],i=function(t){"Promise"in n?new Promise(function(e,r){e(t())}):"undefined"!==n.setImmediate?n.setImmediate(t):setTimeout(t,0)},u={prefix:"abtf-",default_expire:86400,preloaded:{},now:function(){return+new Date/1e3},execWhenIdle:function(e,r){l[16]?l[16](e,{timeout:r}):e()},saveScript:function(i,a,s){u.execWhenIdle(function(){var e={},r=u.now();if(e.date=r,e.expire=r+(s||u.default_expire),a instanceof Array){e.chunked=!0,e.chunks=a.length;for(var t=[],o=a.length,n=0;n<o;n++)t.push(a[n])}else{t=!1;e.data=a}if(u.add(i,e),t)for(o=t.length,n=0;n<o;n++)u.add("chunk:"+n+":"+i,t[n])},3e3)},getScript:function(e){if(void 0!==u.preloaded[e]&&!1!==u.preloaded[e])return u.preloaded[e];u.preloaded[e]=!1;var r=u.get(e);if(!r||"object"!=typeof r)return!1;if(void 0!==r.expire&&r.expire-u.now()<0)return!1;if(void 0!==r.chunked&&!0===r.chunked){for(var t,o=[],n=0;n<r.chunks;n++){if(!1===(t=u.get("chunk:"+n+":"+e))||void 0===t)return!1;o.push(t)}r.data=o.join("")}else if(!r.data)return!1;var i,a="/* @source "+e+" */\n",s=!1;if(l[16]&&void 0!==l[1][2]&&l[1][2]){var c=l[1][2].length;for(n=0;n<c;n++)if("object"==typeof l[1][2][n]&&-1!==e.indexOf(l[1][2][n][0])){s=!0,l[1][2][n][1]&&(i=l[1][2][n][1]);break}}return s?(a+="window.requestIdleCallback(function(){",a+=r.data,a+=i?"},{timeout:"+i+"});":"});"):a+=r.data,u.preloaded[e]=d(a,"application/javascript"),f.push(u.preloaded[e]),u.preloaded[e]},preloadScript:function(e){void 0===u.preloaded[e]&&u.execWhenIdle(function(){void 0===u.preloaded[e]&&(u.preloaded[e]=u.getScript(e))},100)},add:function(r,t,o){if(void 0!==o&&10<parseInt(o))console.error("Abtf.js() ➤ localStorage quota reached","retry limit reached, abort saving...",r);else{"object"==typeof t&&(t=JSON.stringify(t));try{return localStorage.setItem(u.prefix+r,t),!0}catch(e){if(0<=e.name.toUpperCase().indexOf("QUOTA")){var n,i,a,s=[];for(n in localStorage)0===n.indexOf(u.prefix)&&-1===n.indexOf("chunk:")&&(a=n.split(u.prefix)[1],(i=u.get(a))&&s.push([a,i]));return s.length?(s.sort(function(e,r){return e[1].date-r[1].date}),console.error("Abtf.js() ➤ localStorage quota reached","removed",s[0][0],"for key",r),u.remove(s[0][0]),void u.execWhenIdle(function(){void 0===o&&(o=0),u.add(r,t,++o)},1e3)):void console.error("Abtf.js() ➤ localStorage quota reached","no files to remove")}return void console.error("Abtf.js() ➤ localStorage error",e.name,e)}}},remove:function(e){var r=u.get(e);if(r){if(r.chunked)for(var t=parseInt(r.chunks),o=0;o<t;o++)localStorage.removeItem(u.prefix+"chunk:"+o+":"+e);localStorage.removeItem(u.prefix+e)}},get:function(e){var r=localStorage.getItem(u.prefix+e);try{return-1!==e.indexOf("chunk:")?r||!1:JSON.parse(r||"false")}catch(e){return!1}},clear:function(e){var r,t,o,n=this.now(),i=[];for(r in localStorage)if(t=r.split(u.prefix)[1]){if(-1!==t.indexOf("chunk:"))continue;if(!(o=u.get(t)))continue;(!e||o.expire<=n)&&(u.remove(t),i.push(t))}0<i.length&&console.warn("Abtf.js() ➤ localStorage cleared",i.length,"expired scripts")}},d=function(r,t){var o;try{o=new Blob([r],{type:t})}catch(e){n.BlobBuilder=n.BlobBuilder||n.WebKitBlobBuilder||n.MozBlobBuilder,(o=new BlobBuilder).append(r),o=o.getBlob(t)}return URL.createObjectURL(o)},e=function(){self.FETCH=self.fetch||!1,self.DEFAULT_TIMEOUT=5e3,self.MAX_CHUNK_SIZE=1e5,self.CHUNK_DATA=function(e,r){for(var t,o=Math.ceil(e.length/r),n=new Array(o),i=0;i<o;i++)t=i*r,n[i]=e.substring(t,t+r);return n},self.LOAD_RESOURCE=function(t){var o=!1,n=!1,r=function(e,r){if(!o){if(o=!0,n&&(clearTimeout(n),n=!1),!e&&r)r.length>self.MAX_CHUNK_SIZE&&(r=self.CHUNK_DATA(r,self.MAX_CHUNK_SIZE));self.RESOURCE_LOAD_COMPLETED(t,e,r)}};if(self.FETCH){var e=function(e){o||("object"==typeof e&&e.status&&(e=[e.status,e.statusText]),r(e))};self.FETCH(t.url,{method:"GET",mode:"cors",cache:"default"}).then(function(e){o||(e.ok?e.text().then(function(e){r(!1,e)}):r([e.status,e.statusText]))},e).catch(e);var i=t.timeout||self.DEFAULT_TIMEOUT;isNaN(i)&&(i=self.DEFAULT_TIMEOUT),n=setTimeout(function(){o||r("timeout")},i)}else{var a=new XMLHttpRequest;a.open("GET",t.url,!0),a.responseType="text",a.onreadystatechange=function(){o||4===a.readyState&&(200!==a.status?r(a.statusText):r(!1,a.responseText))},a.onerror=function(){o||r(a.statusText)};i=t.timeout||self.DEFAULT_TIMEOUT;isNaN(i)&&(i=self.DEFAULT_TIMEOUT),n=setTimeout(function(){if(!o){try{a.abort()}catch(e){}r("timeout")}},i),a.send(null)}},self.RESOURCE_LOAD_COMPLETED=function(e,r,t){r?(r instanceof Array||"object"!=typeof r||(r=r.toString()),self.postMessage([2,e.i,r])):self.postMessage([1,e.i,t])},self.onmessage=function(e){var r=e.data;if(r instanceof Array)for(var t=r.length,o=0;o<t;o++)"object"==typeof r[o]&&void 0!==r[o].url&&void 0!==r[o].i&&self.LOAD_RESOURCE(r[o]);else{if("object"!=typeof r||void 0===r.url||void 0===r.i)throw new Error("Web Worker Script Loader: Invalid resource object");self.LOAD_RESOURCE(r)}}}.toString().replace(/^function\s*\(\s*\)\s*\{/,"").replace(/\}$/,""),a={workerUri:d(e,"application/javascript"),worker:!1,scriptIndex:0,scriptQueue:[],start:function(){this.worker=new Worker(this.workerUri),this.worker.addEventListener("message",this.handleMessage),this.worker.addEventListener("error",this.handleError)},stop:function(){this.worker&&(this.worker.removeEventListener("message",this.handleMessage),this.worker.removeEventListener("error",this.handleError),this.worker.terminate(),this.worker=!1,console.warn("Abtf.js() ➤ web worker terminated"))},handleMessage:function(e){var r=e.data,t=r[1];if(void 0!==a.scriptQueue[t]){if(1!==parseInt(r[0]))return 2===parseInt(r[0])?r[2]instanceof Array&&200<parseInt(r[2][0])&&parseInt(r[2][0])<600?void console.error("Abtf.js() ➤ web worker ➤ "+r[2][0]+" "+r[2][1],a.scriptQueue[t].url):void console.error("Abtf.js() ➤ web worker script loader error",r[2]):void 0;a.scriptQueue[t].onData(r[2])}else console.error("Abtf.js() ➤ web worker script loader invalid response",r)},handleError:function(e){console.error("Abtf.js() ➤ web worker script loader error",e)},loadScript:function(e,r){this.worker||this.start(),e=l[28](e);var t=parseInt(this.scriptIndex);this.scriptIndex++,this.scriptQueue[t]={url:e,onData:r},this.worker.postMessage({url:e,i:t})}};if(a.start(),n.addEventListener("beforeunload",function(e){if(a.stop(),0<f.length)for(var r=f.length,t=0;t<r;t++)try{URL.revokeObjectURL(f[t])}catch(e){console.error("Abtf.js() ➤ failed to revoke script url",f[t],e)}}),l[16])l[16](function(){u.clear(!0)},{timeout:3e3});else{var r,t=function(){r&&clearTimeout(r),r=setTimeout(function(){u.clear(!0)},2e3)};t(),l[20](t)}l[23]=function(r,t,o){i(function(){var e=u.getScript(r);if(e)return o(e),void l[21](e,t);o(!1),l[21](r,function(){t(),a.loadScript(r,function(e){e?(e instanceof Array?console.info("Abtf.js() ➤ web worker ➤ localStorage saved chunked","("+e.length+" chunks)",l[29](r)):console.info("Abtf.js() ➤ web worker ➤ localStorage saved","("+e.length+")",l[29](r)),u.saveScript(r,e)):console.error("Abtf.js() ➤ web worker script loader no data",l[29](r))})})})},l[25]=function(e){i(function(){u.preloadScript(e)})},l[24]=function(r){var e=u.getScript(r);return e||(a.loadScript(r,function(e){e?(e instanceof Array?console.info("Abtf.js() ➤ web worker ➤ localStorage saved chunked","("+e.length+" chunks)",l[29](r)):console.info("Abtf.js() ➤ web worker ➤ localStorage saved","("+e.length+")",l[29](r)),u.saveScript(r,e)):console.error("Abtf.js() ➤ web worker script loader no data",l[29](r))}),r)}}});