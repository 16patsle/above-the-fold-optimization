!function(u){function o(){var e=[document.body];return function(e){function r(t,e){return e.filter(function(e){return e.b===t})}var a=[];return e.forEach(function(e){e.forEach(function(e){var t,n=r(t=e.selectorText,a);for(t=0<n.length?n[0]:{b:t,c:{}},n=0;n<e.style.length;n++){var o=e.style[n];t.c[o]=e.style.getPropertyValue(o)}0===r(t.b,a).length&&a.push(t)})}),a}(function a(e){return e.reduce(function(e,t){e.push(function(e){var t,n=document.styleSheets,o=[];for(var r in e.matches=e.matches||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector||e.oMatchesSelector,n){var a,i=n[r].rules||n[r].cssRules;for(a in i){t=!!i[a].selectorText&&i[a].selectorText.split(" ").map(function(e){return!!e&&e.split(/(:|::)/)[0]}).join(" ");try{e.matches(t)&&o.push(i[a])}catch(e){}}}return o}(t));var n,o=t.children,r=[];for(n=0;n<o.length;n++)r[n]=o[n];return e.concat(a(r))},[])}(e)).reduce(function(e,n){return e+=n.b+" {\n",(e+=Object.keys(n.c).reduce(function(e,t){return e.push("  "+t+": "+n.c[t]+";"),e},[]).join("\n"))+"\n}\n"},"")}function i(r){function a(e){var t=e.parentStyleSheet.href;t||(0,t="inline"),0==!!s[t]&&(s[t]={media:e.parentStyleSheet.media,a:{}}),0==!!s[t].a[e.selectorText]&&(s[t].a[e.selectorText]={});for(var n=e.style.cssText.split(/;(?![A-Za-z0-9])/),o=0;o<n.length;o++)if(0!=!!n[o]){var r=n[o].split(": ");r[0]=r[0].trim(),r[1]=r[1].trim(),s[t].a[e.selectorText][r[0]]=r[1]}}var i=document,c={},s={};this.f=function(){var e,t,n,o="",r=console&&console.groupCollapsed,a=[];for(var i in console.clear&&console.clear(),r&&(console.log("%cSimple Critical CSS Extraction","font-size:24px;font-weight:bold"),console.log("For professional Critical CSS generators, see https://github.com/addyosmani/critical-path-css-tools")),s){if(r&&(n="inline"===i?"Inline":"File: "+i,console.groupCollapsed(n),e=""),a.push([i,o.split(/\r\n|\r|\n/).length]),o+="/**\n * @file "+i,s[i].media&&(1<s[i].media.length||"all"!==s[i].media[0])){t=[];for(var c=0;c<s[i].media.length;c++)s[i].media[c]&&t.push(s[i].media[c]);0<t.length&&(o+="\n * @media "+t.join(" "))}for(k in o+="\n */\n",s[i].a){for(var l in t=k+" { ",s[i].a[k])t+=l+": "+s[i].a[k][l]+"; ";o+=t+="}\n",r&&(e+=t)}o+="\n",r&&(console.log(e),console.groupEnd())}return r?console.groupCollapsed("All Extracted Critical CSS ("+d(o.length)+")"):console.log("%cAll:","font-weight:bold"),console.log(o),r&&console.groupEnd(),[o,a]},function(){for(var e=r.innerHeight,t=i.createTreeWalker(i,NodeFilter.SHOW_ELEMENT,function(){return NodeFilter.FILTER_ACCEPT},!0);t.nextNode();){var n=t.currentNode;if((n.getBoundingClientRect().top<e||c.h)&&(n=r.getMatchedCSSRules(n)))for(var o=0;o<n.length;o++)a(n[o])}}()}function d(e){var t=Math.floor(Math.log(e)/Math.log(1024));return 1*(e/Math.pow(1024,t)).toFixed(2)+" "+["B","kB","MB"][t]}var e;e=function(){function s(e,t){if(n=e.matchesSelector||e.webkitMatchesSelector||e.mozMatchesSelector||e.msMatchesSelector)try{return n.call(e,t)}catch(e){}else for(var n,o=(n=e.ownerDocument.querySelectorAll(t)).length;o&&o--;)if(n[o]===e)return!0;return!1}function e(e){var t,n,o,r,a,i=[],c=e.ownerDocument.styleSheets,l=c.length;if(1===e.nodeType)for(;l&&l--;)for(t=(n=c[l].cssRules||c[l].rules).length;t&&t--;)if((a=n[t])instanceof CSSStyleRule&&s(e,a.selectorText))i.push(a);else if(a instanceof CSSMediaRule&&u.matchMedia(a.media.mediaText).matches)for(r=(o=a.cssRules||a.rules).length;r&&r--;)(a=o[r])instanceof CSSStyleRule&&s(e,a.selectorText)&&i.push(a);return i}return function(){return u.getMatchedCSSRules?u.getMatchedCSSRules:e}}(),this.getMatchedCSSRules=e();var c=c||function(i){if(!(void 0===i||"undefined"!=typeof navigator&&/MSIE [1-9]\./.test(navigator.userAgent))){var c=i.document.createElementNS("http://www.w3.org/1999/xhtml","a"),l="download"in c,s=/constructor/i.test(i.HTMLElement)||i.g,u=/CriOS\/[\d]+/.test(navigator.userAgent),r=function(e){(i.setImmediate||i.setTimeout)(function(){throw e},0)},d=function(e){setTimeout(function(){"string"==typeof e?(i.URL||i.webkitURL||i).revokeObjectURL(e):e.remove()},4e4)},f=function(e){for(var t=["writestart","progress","write","writeend"],n=(t=[].concat(t)).length;n--;){var o=e["on"+t[n]];if("function"==typeof o)try{o.call(e,e)}catch(e){r(e)}}},h=function(e){return/^\s*(?:text\/\S*|application\/xml|\S*\/\S*\+xml)\s*;.*charset\s*=\s*utf-8/i.test(e.type)?new Blob([String.fromCharCode(65279),e],{type:e.type}):e},o=function(e,t,n){n||(e=h(e));var o,r=this,a="application/octet-stream"===e.type;if(r.readyState=r.INIT,l)return o=(i.URL||i.webkitURL||i).createObjectURL(e),void setTimeout(function(){c.href=o,c.download=t;var e=new MouseEvent("click");c.dispatchEvent(e),f(r),d(o),r.readyState=r.DONE});!function(){if((u||a&&s)&&i.FileReader){var t=new FileReader;return t.onloadend=function(){var e=u?t.result:t.result.replace(/^data:[^;]*;/,"data:attachment/file;");i.open(e,"_blank")||(i.location.href=e),r.readyState=r.DONE,f(r)},t.readAsDataURL(e),r.readyState=r.INIT}o||(o=(i.URL||i.webkitURL||i).createObjectURL(e)),a?i.location.href=o:i.open(o,"_blank")||(i.location.href=o),r.readyState=r.DONE,f(r),d(o)}()},e=o.prototype;return"undefined"!=typeof navigator&&navigator.msSaveOrOpenBlob?function(e,t,n){return t=t||e.name||"download",n||(e=h(e)),navigator.msSaveOrOpenBlob(e,t)}:(e.abort=function(){},e.readyState=e.INIT=0,e.WRITING=1,e.DONE=2,e.error=e.onwritestart=e.onprogress=e.onwrite=e.onabort=e.onerror=e.onwriteend=null,function(e,t,n){return new o(e,t||e.name||"download",n)})}}(u);u.extractCriticalCSS=function(e){for(var t=(n=new i(u).f())[0],n=n[1],o="/**\n * Simple Critical CSS\n *\n * @url "+document.location.href+"\n * @title "+document.title+"\n * @viewport "+u.innerWidth+"x"+u.innerHeight+"\n * @size "+d(t.length)+"\n *\n * Extracted using the ABTF Reborn CSS extract widget.\n * @link https://wordpress.org/plugins/abtfr/\n * @source https://github.com/16patsle/abtf-reborn/blob/master/admin/js/css-extract-widget.js (.min.js)\n *\n * For professional Critical CSS generators see https://github.com/addyosmani/critical-path-css-tools\n *\n * @sources",r=(r=o.split(/\r\n|\r|\n/).length)+(n.length+3),a=0;a<n.length;a++)o+="\n * @line "+(n[a][1]+r)+"\t @file "+n[a][0];if(o+="\n */\n\n",o+=t,e)return e(o);e=new Blob([o],{type:"text/css;charset=utf-8"}),t=(t=u.location.pathname)&&"/"!==t&&-1!==t.indexOf("/")?"-"+t.replace(/\/$/,"").split("/").pop():"-front-page",c(e,"critical-css"+t+".css")},u.extractFullCSS=function(e){var t=o(),n=!!e||!0;if(console.clear&&console.clear(),console.log("%cFull CSS Extraction","font-size:24px;font-weight:bold"),console.groupCollapsed&&console.groupCollapsed("Extracted Full CSS ("+d(t.length)+")"),console.log(t),console.groupCollapsed&&console.groupEnd(),n){if(t="/**\n * Full CSS\n *\n * @url "+document.location.href+"\n * @title "+document.title+"\n * @size "+d(t.length)+"\n *\n * Extracted using the ABTF Reborn CSS extract widget.\n * @link https://wordpress.org/plugins/abtfr/\n * @source https://github.com/16patsle/abtf-reborn/blob/master/admin/js/css-extract-widget.js (.min.js)\n */\n\n"+t,e)return e(t);e=new Blob([t],{type:"text/css;charset=utf-8"}),t=(t=u.location.pathname)&&"/"!==t&&-1!==t.indexOf("/")?"-"+t.replace(/\/$/,"").split("/").pop():"-front-page",c(e,"full-css"+t+".css")}else alert("Your browser does not support javascript based file download. The full CSS is printed in the console.")}}(window),function(e){var t=window.addEventListener?"addEventListener":"attachEvent";(0,window[t])("attachEvent"==t?"onmessage":"message",function(e){if(e.data&&e.data.action){if(!document.getElementById("AbtfrCSS"))return void alert("Error: Critical CSS <style> element not found.");switch(e.data.action){case"extract":switch(e.data.type){case"critical-css":window.extractCriticalCSS(function(e){parent.postMessage({action:"critical-css",css:e},"*")});break;case"full-css":window.extractFullCSS()}break;case"set":(n=document.getElementById("AbtfrCSS")).styleSheet?n.styleSheet.cssText=e.data.css:(n.innerHTML="",n.appendChild(document.createTextNode(e.data.css)));break;case"get":var t,n;t=(n=document.getElementById("AbtfrCSS")).styleSheet?n.styleSheet.cssText:n.innerHTML,parent.postMessage({action:"critical-css",css:t},"*")}}},!1)}(window,document);